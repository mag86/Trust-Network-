# üîê –ú–æ–¥—É–ª—å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Auth)

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### FR1.1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ email/–ø–∞—Ä–æ–ª—é —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω (24 —á–∞—Å–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: 100 –∫—Ä–µ–¥–∏—Ç–æ–≤

### FR1.2: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- –í—Ö–æ–¥ –ø–æ email/–ø–∞—Ä–æ–ª—é
- JWT —Ç–æ–∫–µ–Ω—ã (access token - 1 —á–∞—Å, refresh token - 7 –¥–Ω–µ–π)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞: 5 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç

### FR1.3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email
- –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ (1 —á–∞—Å)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 3 –ø–æ–ø—ã—Ç–∫–∏ –≤ —á–∞—Å

### FR1.4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º
- –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 10 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (30 –º–∏–Ω—É—Ç)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- –ò—Å—Ç–æ—Ä–∏—è –ø–∞—Ä–æ–ª–µ–π (–∑–∞–ø—Ä–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

## üöÄ API Endpoints

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

#### POST `/api/auth/register`
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123",
  "displayName": "John Doe"
}
```

**Response:** 200 OK
```json
{
  "id": 1,
  "email": "user@example.com",
  "status": "PENDING_VERIFICATION",
  "createdAt": "2025-10-31T20:00:00"
}
```

#### POST `/api/auth/verify-email?token={token}`
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –∞–¥—Ä–µ—Å–∞

**Response:** 200 OK - "Email —É—Å–ø–µ—à–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω"

#### POST `/api/auth/resend-verification?email={email}`
–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### POST `/api/auth/login`
–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "SecurePass123"
}
```

**Response:** 200 OK
```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "userId": 1,
  "email": "user@example.com"
}
```

#### POST `/api/auth/refresh?refreshToken={token}`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token

**Response:** 200 OK (–Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã)

#### POST `/api/auth/logout?refreshToken={token}`
–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

#### POST `/api/auth/password-reset`
–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

**Request Body:**
```json
{
  "email": "user@example.com"
}
```

#### POST `/api/auth/password-reset/confirm`
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è

**Request Body:**
```json
{
  "token": "reset-token-from-email",
  "newPassword": "NewSecurePass123"
}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

#### GET `/api/auth/sessions/{userId}`
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π

**Response:** 200 OK
```json
[
  {
    "id": 1,
    "createdAt": "2025-10-31T20:00:00",
    "lastUsedAt": "2025-10-31T22:00:00",
    "ipAddress": "192.168.1.1",
    "userAgent": "Mozilla/5.0...",
    "isActive": true
  }
]
```

#### DELETE `/api/auth/sessions/{sessionId}?userId={userId}`
–ó–∞–≤–µ—Ä—à–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–µ—Å—Å–∏—é

#### DELETE `/api/auth/sessions/all/{userId}`
–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π:** BCrypt
- **JWT —Ç–æ–∫–µ–Ω—ã:** HMAC SHA-256
- **–ó–∞—â–∏—Ç–∞ –æ—Ç brute-force:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- **–ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:** –ü–æ—Å–ª–µ 10 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π:** –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, 1 –∑–∞–≥–ª–∞–≤–Ω–∞—è, 1 —Ü–∏—Ñ—Ä–∞

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- Spring Boot Security
- JWT (io.jsonwebtoken)
- Spring Data JPA
- Jakarta Validation

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Credit –º–æ–¥—É–ª—å:** –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Profile –º–æ–¥—É–ª—å:** –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- **Reputation –º–æ–¥—É–ª—å:** –ù–∞—á–∞–ª—å–Ω—ã–π Trust Score

